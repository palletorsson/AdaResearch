[gd_scene load_steps=4 format=3 uid="uid://hqc1qedx5jca"]

[ext_resource type="Material" uid="uid://ci35dxa4c1wj5" path="res://algorithms/proceduralgeneration/marchingcave/Materials/TerrainMat.tres" id="1_portal"]
[ext_resource type="Script" uid="uid://c6oqc0d2q1pfd" path="res://algorithms/proceduralgeneration/marchingcave/Scripts/TerrainGeneratorUnifiedPortals.gd" id="2_unified"]

[sub_resource type="BoxMesh" id="BoxMesh_portal"]

[node name="PortalLandscape" type="Node3D"]

[node name="UnifiedTerrainPortals" type="MeshInstance3D" parent="."]
material_override = ExtResource("1_portal")
script = ExtResource("2_unified")
portal_emergence_height = 0.0

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, -20, 50, 30)
light_color = Color(0.95, 0.9, 1, 1)
light_energy = 0.8
light_indirect_energy = 0.4
shadow_enabled = true
shadow_bias = 0.05
shadow_normal_bias = 1.5
shadow_blur = 1.5
directional_shadow_mode = 1
directional_shadow_max_distance = 800.0

[node name="OmniLight3D_Center" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 100, 0)
light_color = Color(0.9, 0.85, 1, 1)
light_energy = 3.0
light_indirect_energy = 1.5
omni_range = 500.0
omni_attenuation = 1.5

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(0.866025, -0.25, 0.433013, 0, 0.866025, 0.5, -0.5, -0.433013, 0.75, -400, 250, 500)
near = 0.5
far = 2000.0

[node name="MeshInstance3D_Helper" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("BoxMesh_portal")

[node name="Title" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 150, 0)
billboard = 1
text = "üåÄ 7 Portal Toruses in Marching Cubes Terrain"
font_size = 72

[node name="Instructions" type="Label3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 120, 0)
billboard = 1
text = "üåê UNIFIED MARCHING CUBES TOPOLOGY
Terrain and portals are ONE seamless mesh!
The toruses emerge organically from the ground
(Set use_fallback=true if compute shaders fail)"
font_size = 28
outline_size = 8
